# 42、ES6 中的尾调用优化是什么？请举例说明。

## 一、简介

尾调优化（Tail Call Optimization，TCO），也称为**尾递归优化**，是编程语言中一种编译器或解释器的优化技术，用于优化函数的**尾调用（Tail Call）**。

#### 实质

避免函数在频繁调用的时候，重复实例化。每次调用，通过返回之前的**实例的调用栈（指针）**，来**避免重复创建实例导致的堆栈快速增长**。

#### 主要作用

避免在递归或链式函数调用时产生不必要的调用栈堆积，从而节省内存并防止栈溢出（Stack Overflow）。

::: tip 注意

支持尾调优化的函数的最后一步 **必须且只能是函数调用**，不能有其他操作（如运算、赋值等）。

:::

## 二、示例

以下两个函数中，fun2 的最后一行有含有加法操作，所以不支持尾调优化

```javascript
function fun1() {
  return b(); // 直接返回函数调用
}

function fun2() {
  return b() + 1; // 没有直接返回函数调用
}
```
