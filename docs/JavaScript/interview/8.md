# 作用域与作用域链

## 作用域
作用域是指在程序中定义变量时，这个变量所存在的范围或可访问性。

在JavaScript中，作用域分为全局作用域和局部作用域（也称为函数作用域）。

1. **全局作用域**：全局作用域是指在代码的任何地方都可以访问的变量和函数，它们被定义在全局范围内，不仅在全局范围内可见，还在局部作用域中可见。全局作用域的变量和函数可以被整个程序中的任何地方访问和使用。
2. **局部作用域（函数作用域、[**闭包<LinkIcon />**](./3)）**：局部作用域是指在函数内部定义的变量和函数，它们只在函数内部可见和可访问。这意味着，在函数外部无法直接访问局部作用域中的变量和函数。

作用域规定了变量的可见性和生命周期。当在程序中引用一个变量时，JavaScript会按照作用域链的顺序查找该变量的值。作用域链是一个由多个作用域组成的链表，每个作用域都有一个对外部作用域的引用。当查找一个变量时，JavaScript首先在当前作用域中查找，如果找不到，就会逐级向上查找，直到找到该变量或达到全局作用域。

理解作用域是编写和理解JavaScript代码的重要基础，正确使用作用域可以避免变量名冲突和提高代码的可维护性。

## 作用域链

**作用域链**是JavaScript中用于在运行时解析标识符（变量名、函数名等）的一种机制。它由多个作用域对象组成的链表，并且每个作用域对象都有一个指向其外部作用域的引用。

当在代码中引用一个变量时，JavaScript引擎首先在当前作用域中查找该变量。如果找不到，则会**沿着作用域链向上查找**，直到在某个作用域中找到该变量或达到全局作用域。这个过程被称为**作用域链的遍历**。

当在一个作用域中声明一个变量时，JavaScript引擎会将该变量添加到该作用域对象中，同时建立一个指向外部作用域的引用。这样就形成了一个作用域链，可以访问外部作用域中的变量。

**作用域链的建立是在函数创建时确定的，而不是在函数调用时**。每个函数都有自己的作用域对象，当函数内部引用一个变量时，它首先会在自己的作用域中查找。如果找不到，它会继续沿着作用域链向上查找，直到找到该变量或达到全局作用域。

作用域链的存在使得我们**可以在函数内部访问外部作用域中的变量**，这也是JavaScript的闭包机制的基础。同时，作用域链也帮助我们理解变量的可见性和生命周期，并确保变量名不会冲突。

