# 39、解释 ES6 中的迭代器和迭代协议。

**在 ES6（ECMAScript 2015）中，迭代器（`Iterator`）和迭代协议（`Iteration Protocol`）是用于定义和实现可迭代对象遍历的机制。**

迭代器提供了一种统一的方式来访问集合中的元素，而迭代协议定义了迭代器应该具备的方法。

下面是迭代器和迭代协议的解释：

1. 迭代器（Iterator）：

   - 迭代器是一个对象，它实现了迭代器协议并具有特定的方法。

   - 它提供了一种顺序访问集合中的每个元素的方式，可以一次返回一个元素，直到所有元素都被访问完毕。

   - 每次调用迭代器的

     ```
     next()
     ```

     方法都会返回一个包含两个属性的对象：

     ```
     value
     ```

     和

     ```
     done
     ```

     。

     - `value` 表示当前迭代的值。
     - `done` 是一个布尔值，表示迭代是否已经结束。

2. 迭代协议（Iteration Protocol）：

   - 迭代协议定义了一种机制，用于让对象成为可迭代的，并以一定的顺序提供对其元素的访问。
   - 可迭代对象（Iterable）是一个实现了迭代器方法的对象，可以通过在符号 `Symbol.iterator` 上定义迭代器方法来实现。
   - 迭代器方法（Iterator Method）是一个返回迭代器的函数，它在可迭代对象的 `Symbol.iterator` 属性上定义。

下面是一个示例，展示了如何使用迭代器和迭代协议来遍历一个简单的可迭代对象：

```javascript
const iterableObject = {
  values: [1, 2, 3, 4, 5],
  [Symbol.iterator]() {
    let index = 0;
    const values = this.values;
    return {
      next() {
        if (index < values.length) {
          return {
            value: values[index++],
            done: false,
          };
        } else {
          return {
            done: true,
          };
        }
      },
    };
  },
};

for (const value of iterableObject) {
  console.log(value);
}
// 输出：
// 1
// 2
// 3
// 4
// 5
```

在上面的示例中，`iterableObject` 是一个可迭代对象，它通过在 `Symbol.iterator` 上定义迭代器方法来实现可迭代性。迭代器方法返回一个具有 `next()` 方法的对象，每次调用 `next()` 方法都会返回值和完成状态。使用 `for...of` 循环遍历可迭代对象时，会自动调用迭代器的 `next()` 方法来获取下一个元素，直到迭代完成。

迭代器和迭代协议为开发者提供了一种统一的方式来迭代和访问集合中的元素。这种机制非常灵活，可以自定义迭代器的实现，并在各种数据结构中使用。使用迭代器和迭代协议可以简化遍历的代码逻辑，并提高代码的可读性和可维护性。
