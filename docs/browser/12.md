# 12、如何在前端代码中设置缓存策略，以便利用浏览器缓存？

**在前端代码中，你可以使用以下方法设置缓存策略，以便利用浏览器缓存：**

1. **设置响应头**：在服务器端设置响应头，控制浏览器缓存的行为。以下是常用的响应头字段：

   - `Cache-Control`: 通过设置不同的值，可以控制缓存的行为。常见的值包括：
   - `public`：允许缓存，并且可以在公共缓存中缓存响应。
   - `private`：仅允许单个用户缓存响应，不允许公共缓存缓存响应。
   - `max-age=`：指定资源的最长缓存时间（以秒为单位）。
   - `no-cache`：缓存资源，但在每次请求时都需要与服务器进行验证。
   - `no-store`：禁用缓存，每次请求都需要获取完整的响应。
   - `Expires`: 指定资源的过期日期和时间。
   - `ETag`: 提供资源的唯一标识符，用于缓存验证。
   - `Last-Modified`: 指定资源的最后修改时间，用于缓存验证。

   通过在服务器端设置这些响应头字段，可以控制浏览器如何缓存资源。

2. **使用缓存相关的 HTTP 头字段**：在客户端发起请求时，可以使用一些 HTTP 头字段来指定缓存策略。例如：

   - `If-Modified-Since:` 通过指定上次请求获取的资源的 Last-Modified 字段的值，告诉服务器只有在资源自上次请求以后被修改时才发送新的资源。
   - `If-None-Match:` 通过指定上次请求获取的资源的 ETag 字段的值，告诉服务器只有在资源的 ETag 值发生变化时才发送新的资源。

   这些头字段可以与服务器进行缓存验证，从而避免加载不必要的资源。

3. **使用版本号或哈希值**：在 URL 中添加版本号参数或使用文件内容的哈希值作为文件名，当文件内容改变时，URL 随之改变，强制浏览器获取新的资源。

   例如，将版本号添加到静态文件的 URL 中：

   ```
   <link rel="stylesheet" href="styles.css?v=12345">
   <script src="script.js?v=12345"></script>
   ```

   当文件内容发生变化时，将版本号更新，浏览器会将其视为新的 URL，从而获取新的文件。

通过以上方法，你可以设置适当的缓存策略，以便浏览器可以使用已缓存的资源，减少对服务器的请求，提高网页加载速度和性能。记住，在设置缓存策略时，需要权衡缓存的有效性和及时获取最新资源之间的平衡，确保缓存的正确性和及时性。
