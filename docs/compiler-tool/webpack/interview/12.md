# 12、什么是文件指纹，有什么用？

## 一、概念

Webpack 文件指纹（File Fingerprinting）是一种用于解决浏览器缓存问题的技术。通过为文件名添加唯一的哈希值（hash），可以确保文件内容发生变化时，文件名也会随之改变，从而强制浏览器重新加载最新的文件，而不是使用缓存中的旧版本。

通过合理使用文件指纹，可以有效管理浏览器缓存，提升应用的加载性能。

### 二、常见类型

- **Hash**: 适用于整个项目的构建。只要项目中有任何文件发生变化，所有文件的哈希值就会改变。

```javascript
output: {
  filename: '[name].[hash].js',
  path: __dirname + '/dist'
}
```

- **Chunkhash**: 基于每个 chunk 的内容生成的哈希值。**适用于多入口应用**，只有该 chunk 的内容发生变化时，哈希值才会改变。

```javascript
output: {
  filename: '[name].[chunkhash].js',
  path: __dirname + '/dist'
}
```

- **Contenthash**: 基于文件内容生成的哈希值。**通常用于 CSS 文件**，确保只有文件内容发生变化时，哈希值才会改变。

```javascript
new MiniCssExtractPlugin({
  filename: "[name].[contenthash].css",
});
```

::: tip 建议

建议所有的输出使用`Contenthash`

:::

**配置示例**

以下是一个完整的 Webpack 配置文件示例，展示了如何使用不同类型的文件指纹：

```javascript
const path = require("path");
const MiniCssExtractPlugin = require("mini-css-extract-plugin");

module.exports = {
  entry: "./src/index.js",
  output: {
    filename: "[name].[chunkhash].js",
    path: path.resolve(__dirname, "dist"),
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, "css-loader"],
      },
    ],
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: "[name].[contenthash].css",
    }),
  ],
};
```
