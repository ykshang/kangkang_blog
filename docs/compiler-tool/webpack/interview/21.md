# 8、文件指纹（file fingerprint）和缓存（caching）机制。

## 一、文件指纹

Webpack 的文件指纹（file fingerprint）机制是指在打包生成静态资源时，为每个文件生成唯一的标识码。

这个标识码通常是通过对文件内容进行 **hash计算** 得到的。一旦文件内容发生改变，其文件指纹也会发生改变，从而防止浏览器在缓存过期前使用旧的文件。

文件指纹有以下几种常见的类型：

- `Hash`：每次打包时，Webpack 会给每个输出的文件生成一个 hash 值。只要文件内容发生变化，其 hash 值也会发生变化。
- `Chunkhash`：根据不同的入口文件进行依赖关系解析后，Webpack 会为每个 chunk 生成一个 hash 值。只有当前 chunk 内容发生变化时，其 hash 值才会发生变化。
- `Contenthash`：采用文件内容的 hash 值作为文件指纹，只有文件内容发生变化时，其 hash 值才会发生变化。适用于样式文件、图片文件等。

## 二、缓存

webpack 缓存通常指的是 **模块缓存** 和 **构建缓存** 。

webpack 的缓存机制主要用于提高**开发环境** 的 **构建速度**。具体来说：

1. ‌**模块缓存**‌：通过缓存模块的内容，可以避免重复读取和解析同一个模块的开销。Webpack 默认是开启模块缓存的，即第一次编译时会将已经加载的模块信息缓存到内存中，下一次编译时会直接使用缓存中的模块信息，而不是重新解析模块 ‌。
2. ‌**构建缓存**‌：Webpack 会对每次构建的结果进行 Hash 值的计算，如果两次构建的 Hash 值相同，则表示构建结果一致，Webpack 就会将构建结果缓存下来。当下一次构建时，如果发现输入文件没有发生改变，则会直接使用之前的缓存，这样可以显著提高构建的速度 ‌。

此外，webpack 缓存还涉及到输出文件的文件名配置，通过更改`output.filename`中的 substitutions 以定义输出文件的名称，并使用可替换模板字符串（substitution）来模板化文件名，其中`[contenthash]`将根据资源内容创建唯一哈希值，当资源内容发生变化时，`[contenthash]`也会发生变化，从而确保客户端能够获取到最新的文件 ‌2。

总的来说，webpack 缓存是一种提高构建和部署效率的重要机制。
