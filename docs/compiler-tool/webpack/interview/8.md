# 8、热更新（Hot Module Replacement）的原理

**Webpack的热更新（Hot Module Replacement，简称HMR）是指在应用程序运行时，无需刷新整个页面，只更新发生更改的模块。HMR的原理如下：**

1. **当开发者启用HMR功能并运行Webpack时**，Webpack会在输出的包中添加一些HMR运行时代码。这些代码负责与开发服务器建立WebSocket连接，并接收来自服务器的更新通知。
2. **当开发者修改了一个模块时**，Webpack会生成一个更新补丁（update patch）。这个补丁包含了模块发生更改的详细信息。
3. **HMR运行时代码会接收到更新补丁**，并通过Webpack的模块系统应用更新。它会找到发生更改的模块，替换旧的模块，并触发相应的回调函数。
4. **在处理完模块的更改后，HMR运行时代码会通知Webpack完成热更新过程**。Webpack会通知开发服务器将更新发送给浏览器客户端。
5. **浏览器客户端接收到更新后，使用新的模块来替换页面中发生更改的部分**，从而实现热更新，而不需要刷新整个页面。

总结来说，**Webpack的热更新通过在开发服务器和浏览器客户端之间建立WebSocket连接**，将模块更改的信息传递给浏览器，并在浏览器中实现局部更新，提高开发效率。
