# 4、开发环境和生产环境有什么区别？怎么配置？

## 一、配置方式

在 Webpack 中，可以通过 **Webpack 配置文件** 中 `mode` 配置来指定是开发环境还是生产环境。

配置方案主要有两种：

1. 分别针对生产和测试环境的生成不同的配置文件，使用不同的脚本命令去启动，可以提取出公共配置，写死 `mode` 值。

2. 合并配置文件，执行脚本中注入环境变量，在代码中通过环境变量来设置`mode`的值，同时确定是否执行某些配置。

## 二、配置不同点

|                 | 测试                                        | 生产                         |
| --------------- | ------------------------------------------- | ---------------------------- |
| devServer       | ✔                                           | ❌                           |
| console 日志    | ✔                                           | ❌                           |
| css 提取、压缩  | ❌                                          | ✔                            |
| 热重载          | ✔                                           | ❌                           |
| 代码转换 Loader | ✔                                           | ✔                            |
| 环境变量        | mode: "development"``                       | `mode: "production"`         |
| eslint 检查     | ✔                                           | ✔                            |
| 输出构建文件    | ✔                                           | ❌                           |
| 文件指纹        | ❌                                          | ✔                            |
| 开启缓存        | ✔                                           | ❌                           |
| sourceMap       | `cheap-module-source-map`可以适当的放低要求 | `source-map`需要包含具体信息 |
